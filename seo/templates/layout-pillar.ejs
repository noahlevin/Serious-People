<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Primary Meta Tags -->
  <title><%= title %> | Serious People</title>
  <meta name="description" content="<%= description %>">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="<%= canonical %>">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="<%= typeof ogType !== 'undefined' ? ogType : 'article' %>">
  <meta property="og:url" content="<%= canonical %>">
  <meta property="og:title" content="<%= title %> | Serious People">
  <meta property="og:description" content="<%= description %>">
  <meta property="og:site_name" content="Serious People">
  <meta property="og:locale" content="en_US">
  <meta property="og:image" content="<%= typeof ogImage !== 'undefined' ? ogImage : (canonical.replace(/\/(guides|roles|tools)\/.*$/, '') + '/logo.png') %>">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Serious People - Career Coaching">
  <% if (typeof publishedDate !== 'undefined') { %>
  <meta property="article:published_time" content="<%= publishedDate %>">
  <% } %>
  <% if (typeof modifiedDate !== 'undefined') { %>
  <meta property="article:modified_time" content="<%= modifiedDate %>">
  <% } %>
  <meta property="article:author" content="Serious People">
  <meta property="article:section" content="Career Advice">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@seriouspeople">
  <meta name="twitter:creator" content="@seriouspeople">
  <meta name="twitter:title" content="<%= title %> | Serious People">
  <meta name="twitter:description" content="<%= description %>">
  <meta name="twitter:image" content="<%= typeof ogImage !== 'undefined' ? ogImage : (canonical.replace(/\/(guides|roles|tools)\/.*$/, '') + '/logo.png') %>">
  <meta name="twitter:image:alt" content="Serious People - Career Coaching">
  
  <!-- Robots -->
  <% if (typeof noindex !== 'undefined' && noindex) { %>
  <meta name="robots" content="noindex, nofollow">
  <% } %>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,500&family=Source+Serif+4:ital,opsz,wght@0,8..60,400;0,8..60,500;0,8..60,600;1,8..60,400;1,8..60,500&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="/seo.css?v=<%= Date.now() %>">
  
  <% if (typeof headExtra !== 'undefined') { %>
  <%- headExtra %>
  <% } %>
  
  <% if (typeof organizationSchema !== 'undefined') { %>
  <%- organizationSchema %>
  <% } %>
</head>
<body class="sp-pillar-page">
  <%- include("partials/header", { active: typeof active !== "undefined" ? active : "guides" }) %>
  
  <%- body %>
  
  <%- include("partials/footer") %>
  
  <% if (typeof footerExtra !== 'undefined') { %>
  <%- footerExtra %>
  <% } %>
  
  <% if (typeof posthogKey !== 'undefined' && posthogKey) { %>
  <!-- PostHog Analytics -->
  <script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys onSessionId".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('<%= posthogKey %>', {
      api_host: 'https://us.i.posthog.com',
      person_profiles: 'identified_only',
      capture_pageview: true,
      capture_pageleave: true,
      autocapture: false
    });
    posthog.capture('seo_page_view', {
      page_type: '<%= typeof pageType !== "undefined" ? pageType : "pillar" %>',
      page_slug: '<%= typeof pageSlug !== "undefined" ? pageSlug : "" %>',
      page_title: '<%= typeof title !== "undefined" ? title : "" %>'
    });
    document.addEventListener('DOMContentLoaded', function() {
      var ctaButtons = document.querySelectorAll('.sp-btn, a[href="/app/interview/start"]');
      ctaButtons.forEach(function(btn) {
        btn.addEventListener('click', function() {
          posthog.capture('seo_cta_click', {
            page_type: '<%= typeof pageType !== "undefined" ? pageType : "pillar" %>',
            page_slug: '<%= typeof pageSlug !== "undefined" ? pageSlug : "" %>',
            cta_href: btn.getAttribute('href')
          });
        });
      });
      
      var scrollDepthsTracked = {};
      var scrollThresholds = [25, 50, 75, 90, 100];
      
      function getScrollPercent() {
        var h = document.documentElement;
        var b = document.body;
        var st = 'scrollTop';
        var sh = 'scrollHeight';
        return Math.round((h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100);
      }
      
      function trackScrollDepth() {
        var scrollPercent = getScrollPercent();
        scrollThresholds.forEach(function(threshold) {
          if (scrollPercent >= threshold && !scrollDepthsTracked[threshold]) {
            scrollDepthsTracked[threshold] = true;
            posthog.capture('seo_scroll_depth', {
              page_type: '<%= typeof pageType !== "undefined" ? pageType : "pillar" %>',
              page_slug: '<%= typeof pageSlug !== "undefined" ? pageSlug : "" %>',
              depth_percent: threshold
            });
          }
        });
      }
      
      var scrollTimeout;
      window.addEventListener('scroll', function() {
        if (scrollTimeout) clearTimeout(scrollTimeout);
        scrollTimeout = setTimeout(trackScrollDepth, 100);
      }, { passive: true });
    });
  </script>
  <% } %>
</body>
</html>

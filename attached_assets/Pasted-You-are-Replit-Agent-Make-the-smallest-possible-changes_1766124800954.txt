You are Replit Agent. Make the smallest possible changes to implement a single, cached “session + journey bootstrap” call for the SPA and stop per-page auth checks.

Hard rules:

* Only edit these files: `routes.ts` and `useAuth.tsx`.
* Do NOT refactor, rename, or reformat unrelated code.
* Do NOT change any other endpoints besides adding a new one.
* Return (a) a concise diff-style summary of what changed and why, and (b) the full updated contents of any file you changed.
* Include a 5-step smoke-test checklist at the end.

Goal:

* Add `GET /api/bootstrap` that returns a single payload the SPA can use on mount to determine whether the user is authenticated and where they are in the journey flow.
* Update the SPA auth hook/provider to call `/api/bootstrap` once (cached) instead of refetching `/auth/me` on every navigation.

Implementation details:

1. In `routes.ts`, add a new route handler:

`GET /api/bootstrap`

Behavior:

* If NOT logged in, return HTTP 200 with:

  ```json
  {
    "authenticated": false,
    "user": null,
    "journey": null,
    "routing": null
  }
  ```
* If logged in, return HTTP 200 with:

  * `authenticated: true`
  * `user`: `{ id, email, name, providedName }` (use `storage.getUser(userId)` if possible; fall back to `req.user`)
  * `journey.state`: use existing `storage.getJourneyState(userId)` (or default flags if null)
  * Determine `phase` using these rules:

    * If `interviewComplete` is false → `"INTERVIEW"`
    * Else if `paymentVerified` is false:

      * If user transcript has a `stripeSessionId` (use `storage.getTranscriptByUserId(userId)`) → `"CHECKOUT_PENDING"`
      * Else → `"OFFER"`
    * Else if `module1Complete` is false → `"PURCHASED"`
    * Else if `module2Complete` is false → `"MODULE_2"`
    * Else if `module3Complete` is false → `"MODULE_3"`
    * Else if `hasSeriousPlan` is false → `"COACH_LETTER"`
    * Else → `"SERIOUS_PLAN"`
  * Compute routing values as “app-internal paths” (do NOT include `/app` prefix):

    * `canonicalPath`:

      * INTERVIEW → `"/interview/start"`
      * OFFER → `"/offer"`
      * CHECKOUT_PENDING → `"/offer/success"`
      * otherwise → `"/progress"`
    * `resumePath`:

      * INTERVIEW → `"/interview/start"`
      * OFFER → `"/offer"`
      * CHECKOUT_PENDING → `"/offer/success"`
      * PURCHASED → `"/module/1"`
      * MODULE_2 → `"/module/2"`
      * MODULE_3 → `"/module/3"`
      * COACH_LETTER → `"/coach-letter"`
      * SERIOUS_PLAN → `"/serious-plan"`
    * `allowedPaths` (minimal, but supports read-only revisits):

      * INTERVIEW → `["/interview/start","/interview/prepare","/interview/chat"]`
      * OFFER → `["/offer","/offer/success"]`
      * CHECKOUT_PENDING → `["/offer","/offer/success"]`
      * PURCHASED → `["/progress","/module/1"]`
      * MODULE_2 → `["/progress","/module/1","/module/2"]`
      * MODULE_3 → `["/progress","/module/1","/module/2","/module/3"]`
      * COACH_LETTER → `["/progress","/module/1","/module/2","/module/3","/coach-letter"]`
      * SERIOUS_PLAN → `["/progress","/module/1","/module/2","/module/3","/coach-letter","/serious-plan"]`
* Return shape:

  ```json
  {
    "authenticated": true,
    "user": { ... },
    "journey": { "state": { ... }, "phase": "..." },
    "routing": { "canonicalPath":"...", "resumePath":"...", "allowedPaths":[...] }
  }
  ```

Paste in code that follows the above exactly, using existing imports/utilities in `routes.ts` and `storage`.

2. In `useAuth.tsx`, change the React Query call:

* Stop querying `"/auth/me"`.
* Instead query `"/api/bootstrap"` with:

  * `queryKey: ["/api/bootstrap"]`
  * `staleTime: 5 * 60 * 1000`
  * `refetchOnWindowFocus: false`
  * `retry: false`
* Ensure the auth hook/provider exposes:

  * `user` (from bootstrap response when authenticated)
  * `isAuthenticated` (boolean)
  * `authChecked` (true after query resolves, even if unauthenticated)
  * (optional) `routing` and `journey` if easy, but do not refactor other consumers—keep compatibility where possible.

3. Do NOT add any new files, and do not modify `App.tsx` or any page components in this change.

Output requirements:

* Provide a diff-style summary of changes (what/why).
* Provide the full updated contents of `routes.ts` and `useAuth.tsx`.
* Provide a 5-step smoke-test checklist:

  1. confirm one `/api/bootstrap` call on SPA mount
  2. unauthenticated payload shape
  3. authenticated payload shape
  4. no repeated auth refetch on navigation
  5. legacy endpoints still work
